/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,r={5431:(e,t,n)=>{var r=n(6540),o=n(5338),a=n(1468),i=n(38),c=n(9189),l=n(5816),u=(0,i.Z0)({name:"notify",initialState:{success:[],warnings:[],errors:[]},reducers:{setSuccess:function(e,t){var n=t.payload.message;n&&e.success.push(n)},clearSuccess:function(e,t){var n,r;if(null!=t&&null!==(n=t.payload)&&void 0!==n&&n.type&&"number"==typeof(null==t||null===(r=t.payload)||void 0===r?void 0:r.index)){var o=t.payload,a=o.type,i=o.index;e[a].splice(i,1)}else e.success=[]},setWarnings:function(e,t){var n=t.payload.message;n&&e.warnings.push(n)},clearWarnings:function(e,t){var n,r;if(null!=t&&null!==(n=t.payload)&&void 0!==n&&n.type&&"number"==typeof(null==t||null===(r=t.payload)||void 0===r?void 0:r.index)){var o=t.payload,a=o.type,i=o.index;e[a].splice(i,1)}else e.warnings=[]},setErrors:function(e,t){var n=t.payload.message;n&&e.errors.push(n)},clearErrors:function(e,t){var n,r;if(null!=t&&null!==(n=t.payload)&&void 0!==n&&n.type&&"number"==typeof(null==t||null===(r=t.payload)||void 0===r?void 0:r.index)){var o=t.payload,a=o.type,i=o.index;e[a].splice(i,1)}else e.errors=[]}}}),s=u.actions,f=s.setSuccess,d=s.clearSuccess,m=s.setWarnings,p=s.clearWarnings,v=s.setErrors,y=s.clearErrors;const h=u.reducer;function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return g(u,"_invoke",function(n,r,o){var a,c,l,u=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,l=e,d.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!f&&u&&!o&&t<s.length;t++){var o,a=s[t],m=d.p,p=a[2];n>3?(o=p===r)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(c=0,d.v=r,d.n=a[1]):m<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,d.n=p,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),c=s,l=p;(t=c<2?e:l)||!f;){a||(c?c<3?(c>1&&(d.n=-1),m(c,l)):d.n=l:d.v=l);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?l:n.call(r,d))!==i)break}catch(t){a=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,o,a),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(g(t={},r,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,g(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,g(f,"constructor",u),g(u,"constructor",l),l.displayName="GeneratorFunction",g(u,o,"GeneratorFunction"),g(f),g(f,o,"Generator"),g(f,r,(function(){return this})),g(f,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:a,m:d}})()}function g(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}g=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){g(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},g(e,t,n,r)}function w(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}var E=(0,c.cw)({baseUrl:"".concat(window.location.origin,"/wp-json/wpp-generator/v1"),credentials:"same-origin",prepareHeaders:function(e,t){t.getState;return e.set("Content-Type","application/json"),e.set("Accept","application/json"),e.set("X-WP-Nonce",lsomabChatBotLocalizer.nonce),e}}),_=function(){var e,t=(e=b().m((function e(t,n,r){var o,a,i,c,l,u;return b().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,E(t,n,r);case 1:return"success"===(null==(i=e.v)||null===(o=i.data)||void 0===o?void 0:o.status)?n.dispatch(f({message:null==i||null===(c=i.data)||void 0===c?void 0:c.message})):"warning"===(null==i||null===(a=i.data)||void 0===a?void 0:a.status)?n.dispatch(m({message:null==i||null===(l=i.data)||void 0===l?void 0:l.message})):n.dispatch(v({message:null==i||null===(u=i.error)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message})),e.a(2,i)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){w(a,r,o,i,c,"next",e)}function c(e){w(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}();const O=(0,l.xP)({baseQuery:_,endpoints:function(e){return{}}});function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=(0,i.U1)({reducer:j(j({},O.reducerPath,O.reducer),"notify",h),middleware:function(e){return e().concat(O.middleware)},devTools:!1});var x=n(4976),N=n(1522),k=n(7767),R=function(e){var t=e.className,n=void 0===t?"wppgn-success":t,r=e.children,o=e.index,a=e.onClose;return React.createElement("div",{key:o,className:"wppgn-flash-message ".concat(n)},React.createElement("div",{className:"wppgn-icon"},"wppgn-error"===n?React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",className:"error-x-icon"},React.createElement("path",{d:"M18 6L6 18M6 6l12 12"})):"wppgn-warning"===n?React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",className:"warning-icon"},React.createElement("path",{d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})):React.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},React.createElement("path",{d:"M20 6L9 17l-5-5"}))),React.createElement("div",{className:"wppgn-content"},React.createElement("div",{className:"wppgn-flash-description"},r)),React.createElement("button",{onClick:a,className:"wppgn-close"},React.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},React.createElement("path",{d:"M18 6L6 18M6 6l12 12"}))))},P={successTime:null,warningTime:null,errorTime:null},C=1e4;const G=function(){var e=(0,a.wA)(),t=(0,a.d4)((function(e){return e.notify.success})),n=(0,a.d4)((function(e){return e.notify.warnings})),o=(0,a.d4)((function(e){return e.notify.errors}));(0,r.useEffect)((function(){0!==t.length&&(clearTimeout(P.successTime),P.successTime=setTimeout((function(){e(d())}),C)),0!==n.length&&(clearTimeout(P.warningTime),P.warningTime=setTimeout((function(){e(p())}),C)),0!==o.length&&(clearTimeout(P.errorTime),P.errorTime=setTimeout((function(){e(y())}),C))}),[t,n,o]);return t.length>0||n.length>0||o.length>0?React.createElement("div",{className:"lsomab-flash-box"},t.length>0&&t.map((function(t,n){return React.createElement(R,{key:"success-".concat(n),index:n,className:"wppgn-success",onClose:function(){return function(t,n){e(d({index:n,type:t}))}("success",n)}},t)})),n.length>0&&n.map((function(t,n){return React.createElement(R,{key:"warning-".concat(n),index:n,className:"wppgn-warning",onClose:function(){return function(t,n){e(p({index:n,type:t}))}("warnings",n)}},t)})),o.length>0&&o.map((function(t,n){return React.createElement(R,{key:"error-".concat(n),index:n,className:"wppgn-error",onClose:function(){return function(t,n){e(y({index:n,type:t}))}("errors",n)}},t)}))):""};const A=function(){return React.createElement(React.Fragment,null,React.createElement("header",{className:"lsomab-header"},React.createElement("h1",null,(0,N.__)("Chat Bot","my-ai-bot"))),React.createElement("div",{className:"lsomab-react-js-app-container"},React.createElement(k.sv,null),React.createElement(G,null)))};var M=O.injectEndpoints({endpoints:function(e){return{askAssistant:e.mutation({query:function(e){var t=e.user_question,n=e.thread_id;return{url:"/chatbot/ask",method:"POST",body:n?{user_question:t,thread_id:n}:{user_question:t}}}}),getThreads:e.query({query:function(){return{url:"/chatbot/threads",method:"GET"}}})}}});var L=M.useAskAssistantMutation,q=M.useGetThreadsQuery;function B(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var l=r&&r.prototype instanceof c?r:c,u=Object.create(l.prototype);return W(u,"_invoke",function(n,r,o){var a,c,l,u=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,c=0,l=e,d.n=n,i}};function m(n,r){for(c=n,l=r,t=0;!f&&u&&!o&&t<s.length;t++){var o,a=s[t],m=d.p,p=a[2];n>3?(o=p===r)&&(l=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=n<2&&m<a[1])?(c=0,d.v=r,d.n=a[1]):m<p&&(o=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,d.n=p,c=0))}if(o||n>1)return i;throw f=!0,r}return function(o,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),c=s,l=p;(t=c<2?e:l)||!f;){a||(c?c<3?(c>1&&(d.n=-1),m(c,l)):d.n=l:d.v=l);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(f=d.n<0)?l:n.call(r,d))!==i)break}catch(t){a=e,c=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,o,a),!0),u}var i={};function c(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(W(t={},r,(function(){return this})),t),f=u.prototype=c.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,W(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,W(f,"constructor",u),W(u,"constructor",l),l.displayName="GeneratorFunction",W(u,o,"GeneratorFunction"),W(f),W(f,o,"Generator"),W(f,r,(function(){return this})),W(f,"toString",(function(){return"[object Generator]"})),(B=function(){return{w:a,m:d}})()}function W(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}W=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){W(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},W(e,t,n,r)}function F(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const D=function(){var e,t=U((0,r.useState)(""),2),n=t[0],o=t[1],a=U((0,r.useState)([]),2),i=a[0],c=a[1],l=U((0,r.useState)(null),2),u=l[0],s=l[1],f=U(L(),2),d=f[0],m=f[1].isLoading,p=q(),v=p.data,y=p.isLoading,h=(0,r.useRef)(null);(0,r.useEffect)((function(){h.current&&(h.current.scrollTop=h.current.scrollHeight)}),[i]);var b=function(){var e,t=(e=B().m((function e(t){var r,a,i;return B().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),n.trim()){e.n=1;break}return e.a(2);case 1:return r={sender:"user",text:n},c((function(e){return[].concat(F(e),[r])})),e.p=2,a=u?{user_question:n,thread_id:u}:{user_question:n},e.n=3,d(a).unwrap();case 3:(i=e.v)&&i.assistant_reply&&c((function(e){return[].concat(F(e),[{sender:"assistant",text:i.assistant_reply}])})),i&&i.thread_id&&!u&&s(i.thread_id),e.n=5;break;case 4:e.p=4,e.v,c((function(e){return[].concat(F(e),[{sender:"assistant",text:"Error: Unable to get response."}])}));case 5:o("");case 6:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();return r.createElement("div",{className:"lsomab-container"},r.createElement("div",{className:"lsomab-thread-dropdown",style:{marginBottom:16}},r.createElement("label",{htmlFor:"lsomab-thread-select",style:{marginRight:8}},(0,N.__)("Select Thread:","my-ai-bot")),r.createElement("select",{id:"lsomab-thread-select",className:"lsomab-thread-select",value:u||"",onChange:function(e){var t,n,r=e.target.value;if(!r)return s(null),void c([]);var o=null==v||null===(t=v.threads)||void 0===t?void 0:t.find((function(e){return e.thread_id===r}));s(r),c((null==o||null===(n=o.chat)||void 0===n?void 0:n.map((function(e){return{sender:"user"===e.role?"user":"assistant",text:e.content}})))||[])},disabled:y},r.createElement("option",{value:""},(0,N.__)("New Thread","my-ai-bot")),null==v||null===(e=v.threads)||void 0===e?void 0:e.map((function(e){return r.createElement("option",{key:e.thread_id,value:e.thread_id},e.title||e.thread_id)})))),r.createElement("div",{className:"lsomab-chat-area",ref:h},0===i.length&&r.createElement("div",{className:"lsomab-chat-empty"},(0,N.__)("No messages yet. Start the conversation!","my-ai-bot")),i.map((function(e,t){return r.createElement("div",{key:t,className:"lsomab-chat-message lsomab-chat-".concat(e.sender)},r.createElement("div",{className:"lsomab-chat-bubble"},e.text))}))),r.createElement("form",{className:"lsomab-chat-form",onSubmit:b},r.createElement("input",{type:"text",className:"lsomab-chat-input",value:n,onChange:function(e){o(e.target.value)},placeholder:(0,N.__)("Type your message...","my-ai-bot"),disabled:m}),r.createElement("button",{type:"submit",className:"lsomab-chat-submit",disabled:m},m?(0,N.__)("Loading...","my-ai-bot"):(0,N.__)("Submit","my-ai-bot"))))};const Q=function(){return React.createElement("div",null,React.createElement("h1",{className:"lsomab-not-found"},"404"))};const K=(0,x.Ge)([{path:"/",element:React.createElement(A,null),children:[{index:!0,element:React.createElement(D,null)},{path:"*",element:React.createElement(Q,null)}]}]);document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("lsomabChatBot");e&&(0,o.H)(e).render(r.createElement(r.StrictMode,null,r.createElement(a.Kq,{store:T},r.createElement(x.pg,{router:K}))))}))}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,a),n.exports}a.m=r,e=[],a.O=(t,n,r,o)=>{if(!n){var i=1/0;for(s=0;s<e.length;s++){for(var[n,r,o]=e[s],c=!0,l=0;l<n.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(c=!1,o<i&&(i=o));if(c){e.splice(s--,1);var u=r();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[n,r,o]},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var c=2&r&&e;"object"==typeof c&&!~t.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=460,(()=>{var e={460:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,c,l]=n,u=0;if(i.some((t=>0!==e[t]))){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(l)var s=l(a)}for(t&&t(n);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(s)},n=self.webpackChunklsomab_npm_handler=self.webpackChunklsomab_npm_handler||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[344],(()=>a(5431)));i=a.O(i)})();